{"version":3,"sources":["../../src/lib/database.js"],"names":["connection","console","log","process","env","DATABASE_URL","mongo","connect","name","conn","collection","require","MongoClient","close","module","exports"],"mappings":";;;oEAIA;AAAA;AAAA;AAAA;AAAA;AAAA,UACMA,UADN;AAAA;AAAA;AAAA;;AAEEC,cAAQC,GAAR,gCAAyCC,QAAQC,GAAR,CAAYC,YAArD;AAFF;AAAA,aAGqBC,MAAMC,OAAN,CAAcJ,QAAQC,GAAR,CAAYC,YAA1B,CAHrB;;AAAA;AAGEL,gBAHF;;AAAA;AAAA,uCAMQA,UANR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;iBAAeO,O;;;;;;qEASf,kBAA0BC,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACoBD,SADpB;;AAAA;AACOE,UADP;AAAA,wCAEQA,KAAKC,UAAL,CAAgBF,IAAhB,CAFR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;iBAAeE,U;;;;;;;AAbf,IAAMJ,QAAQK,QAAQ,SAAR,EAAmBC,WAAjC;;AAEA,IAAIZ,mBAAJ;;AAgBA,SAASa,KAAT,GAAiB;AAChB,KAAIb,UAAJ,EAAgB;AACfA,aAAWa,KAAX;AACA;AACD;;AAEDC,OAAOC,OAAP,GAAiB;AAChBR,iBADgB;AAEhBG,uBAFgB;AAGhBG;AAHgB,CAAjB","file":"database.js","sourcesContent":["const mongo = require('mongodb').MongoClient;\n\nlet connection;\n\nasync function connect() {\n\tif (!connection) {\n\t\tconsole.log(`Connecting to database at ${process.env.DATABASE_URL}`);\n\t\tconnection = await mongo.connect(process.env.DATABASE_URL);\n\t}\n\n\treturn connection;\n}\n\nasync function collection(name) {\n\tconst conn = await connect();\n\treturn conn.collection(name);\n}\n\nfunction close() {\n\tif (connection) {\n\t\tconnection.close();\n\t}\n}\n\nmodule.exports = {\n\tconnect,\n\tcollection,\n\tclose,\n};\n"]}