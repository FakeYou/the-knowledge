{"version":3,"sources":["../src/overpass.js"],"names":["bbox","rules","query","join","overpass","results","gather","database","require","module","exports"],"mappings":";;;oEAGA,iBAAsBA,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AACOC,WADP,GACe;AACb;AADa,qDAEgCD,IAFhC,uDAG+BA,IAH/B,4DAIoCA,IAJpC;AAKb;AALa,sFAMiEA,IANjE,wFAOgEA,IAPhE,6FAQqEA,IARrE;AASb;AATa,4DAUuCA,IAVvC,8DAWsCA,IAXtC,mEAY2CA,IAZ3C,QADf;AAgBOE,WAhBP,oDAmBKD,MAAME,IAAN,CAAW,IAAX,CAnBL;AAAA;AAAA,aA0BuBC,SAASF,KAAT,CA1BvB;;AAAA;AA0BOG,aA1BP;AAAA,uCA4BQA,OA5BR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,E;;iBAAeC,M;;;;;;;AAHf,IAAMC,WAAWC,QAAQ,gBAAR,CAAjB;AACA,IAAMJ,WAAWI,QAAQ,gBAAR,CAAjB;;AAiCAC,OAAOC,OAAP,GAAiBJ,MAAjB","file":"overpass.js","sourcesContent":["const database = require('./lib/database');\nconst overpass = require('./lib/overpass');\n\nasync function gather(bbox) {\n\tconst rules = [\n\t\t// sportcomplexes\n\t\t`node[\"sport\"][\"name\"][\"leisure\"!=\"pitch\"](${bbox});`,\n\t\t`way[\"sport\"][\"name\"][\"leisure\"!=\"pitch\"](${bbox});`,\n\t\t`relation[\"sport\"][\"name\"][\"leisure\"!=\"pitch\"](${bbox});`,\n\t\t// amenities\n\t\t`node[\"amenity\"~\"cinema|embassy|hospital|theatre|place_of_worship\"][\"name\"](${bbox});`,\n\t\t`way[\"amenity\"~\"cinema|embassy|hospital|theatre|place_of_worship\"][\"name\"](${bbox});`,\n\t\t`relation[\"amenity\"~\"cinema|embassy|hospital|theatre|place_of_worship\"][\"name\"](${bbox});`,\n\t\t// academic\n\t\t`node[\"amenity\"~\"library|school|college\"][\"name\"](${bbox});`,\n\t\t`way[\"amenity\"~\"library|school|college\"][\"name\"](${bbox});`,\n\t\t`relation[\"amenity\"~\"library|school|college\"][\"name\"](${bbox});`,\n\t];\n\n\tconst query = `\n\t\t[out:json][timeout:25];\n\t\t(\n\t\t\t${rules.join('\\n')}\n\t\t);\n\t\tout body;\n\t\t>;\n\t\tout skel qt;\n\t`;\n\n\tconst results = await overpass(query);\n\n\treturn results;\n}\n\nmodule.exports = gather;\n"]}